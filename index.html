<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æˆ‘ä»¬çš„ä¸“å±ç½‘ç«™ â¤ï¸</title>

<style>
body{
margin:0;
font-family:"Microsoft YaHei";
background:black;
color:white;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
overflow:hidden;
}

/* æ˜Ÿç©º */
.star{
position:absolute;
width:2px;
height:2px;
background:white;
border-radius:50%;
animation:twinkle 2s infinite;
z-index:1;
}

@keyframes twinkle{
0%,100%{opacity:0.2;}
50%{opacity:1;}
}

.card{
background:rgba(0,0,0,0.85);
padding:40px;
border-radius:20px;
max-width:600px;
z-index:5;
text-align:center;
}

button{
padding:15px 30px;
border:none;
border-radius:30px;
background:#ff4d6d;
color:white;
font-size:18px;
margin:10px;
cursor:pointer;
}

.bigLove{
font-size:28px;
font-weight:bold;
margin-top:20px;
}

/* å½©è›‹æ–‡å­— */
.secretText{
position:fixed;
width:100%;
text-align:center;
top:40%;
font-size:32px;
color:#ffd700;
z-index:9999;
animation:fade 1s ease;
}

@keyframes fade{
from{opacity:0;}
to{opacity:1;}
}

/* çƒŸèŠ± */
.fire{
position:fixed;
width:6px;
height:6px;
border-radius:50%;
animation:boom 1s forwards;
z-index:9999;
}

@keyframes boom{
to{
transform:translate(var(--x),var(--y));
opacity:0;
}
}
</style>
</head>

<body>

<div id="stars"></div>

<div class="card">

<h1>â¤ï¸ è‡´æ©æ…ˆå°å§ â¤ï¸</h1>

<p id="letter"></p>

<div id="anniversary"></div>

<p class="bigLove">
ä½ æ„¿æ„åšæˆ‘çš„æƒ…äººå— â¤ï¸
</p>

<div style="position:relative;height:120px;margin-top:20px;">

<button onclick="yesLove()">æˆ‘æ„¿æ„ ğŸ’–</button>
<button id="noBtn" style="position:absolute;left:250px;">æˆ‘ä¸æ„¿æ„ ğŸ˜</button>

</div>

</div>

<script>

//////////////// æ˜Ÿç©º //////////////////
for(let i=0;i<120;i++){
let s=document.createElement("div");
s.className="star";
s.style.left=Math.random()*100+"vw";
s.style.top=Math.random()*100+"vh";
document.body.appendChild(s);
}

//////////////// æ‰“å­—æœº //////////////////
const text=`äº²çˆ±çš„æ©æ…ˆå°å§ï¼Œ

æ—¶é—´èè‹’ æ—¥æœˆå¦‚æ¢­
æˆ‘ä»¬å·²ç»æºæ‰‹èµ°è¿‡å¾ˆå¤šæ—¥å¤œ

æ‰€ä»¥æˆ‘æƒ³ä¸ºä½ åˆ›é€ 
ä¸€ä¸ªåªå±äºæˆ‘ä»¬çš„ä¸–ç•Œ â¤ï¸`;

let i=0;
function typing(){
if(i<text.length){
document.getElementById("letter").innerHTML+=
text[i]=="\n"?"<br>":text[i];
i++;
setTimeout(typing,50);
}}
typing();

//////////////// çºªå¿µæ—¥æœŸ //////////////////
const saved=localStorage.getItem("loveDay");
if(saved){
document.getElementById("anniversary").innerHTML=
"ä½ åœ¨ "+saved+" ç­”åº”æˆä¸ºæˆ‘çš„æƒ…äºº â¤ï¸";
}

//////////////// ç‚¹å‡»æ„¿æ„ //////////////////
function yesLove(){

let today=new Date().toLocaleDateString();
localStorage.setItem("loveDay",today);

for(let i=0;i<40;i++){
let f=document.createElement("div");
f.className="fire";
f.style.background=`hsl(${Math.random()*360},100%,60%)`;
f.style.left="50%";
f.style.top="50%";
f.style.setProperty("--x",(Math.random()-0.5)*300+"px");
f.style.setProperty("--y",(Math.random()-0.5)*300+"px");
document.body.appendChild(f);
setTimeout(()=>f.remove(),1000);
}

showText("è€å©†æˆ‘çˆ±ä½  â¤ï¸");

setTimeout(()=>{
window.location.href="https://1mergency.github.io/Love-album/";
},2500);
}

//////////////// æ‹’ç»æŒ‰é’®é€ƒè·‘ //////////////////
const noBtn=document.getElementById("noBtn");
noBtn.addEventListener("mouseover",()=>{
noBtn.style.left=Math.random()*300+"px";
noBtn.style.top=Math.random()*80+"px";
});

//////////////// å½©è›‹ç»Ÿä¸€å‡½æ•° //////////////////
let textQueue = [];
let showing = false;

function showText(msg){

textQueue.push(msg);

if(!showing){
playNext();
}

}

function playNext(){

if(textQueue.length === 0){
showing = false;
return;
}

showing = true;

let t=document.createElement("div");
t.className="secretText";
t.innerText=textQueue.shift();

document.body.appendChild(t);

setTimeout(()=>{
t.remove();
playNext();
},3000);

}

//////////////// ç‚¹å‡»æµæ˜Ÿ //////////////////
document.body.addEventListener("click",()=>{
showText("é‡è§ä½ æ˜¯æˆ‘æœ€å¹¸è¿çš„å¥‡è¿¹ â¤ï¸");
});

//////////////// é•¿æŒ‰çƒŸèŠ± //////////////////
let timer;
document.addEventListener("mousedown",(e)=>{
timer=setTimeout(()=>fireworks(e.clientX,e.clientY),800);
});
document.addEventListener("mouseup",()=>clearTimeout(timer));

function fireworks(x,y){
for(let i=0;i<50;i++){
let f=document.createElement("div");
f.className="fire";
f.style.background=`hsl(${Math.random()*360},100%,60%)`;
f.style.left=x+"px";
f.style.top=y+"px";
f.style.setProperty("--x",(Math.random()-0.5)*400+"px");
f.style.setProperty("--y",(Math.random()-0.5)*400+"px");
document.body.appendChild(f);
setTimeout(()=>f.remove(),1000);
}

showText("ä»¥åæ¯ä¸€å¹´æƒ…äººèŠ‚éƒ½é™ªä½ è¿‡ â¤ï¸");
}

//////////////// åŒå‡»ç«ç‘°é›¨ //////////////////
document.body.ondblclick=()=>{
for(let i=0;i<30;i++){
let r=document.createElement("div");
r.innerHTML="ğŸŒ¹";
r.style.position="fixed";
r.style.left=Math.random()*100+"vw";
r.style.top="-20px";
r.style.fontSize="24px";
r.style.zIndex="9999";
document.body.appendChild(r);

let fall=setInterval(()=>{
r.style.top=parseInt(r.style.top)+5+"px";
if(parseInt(r.style.top)>window.innerHeight){
r.remove();
clearInterval(fall);
}
},30);
}
};

//////////////// åœç•™30ç§’ //////////////////
setTimeout(()=>{
showText("è°¢è°¢ä½ å‡ºç°åœ¨æˆ‘çš„ç”Ÿå‘½é‡Œ â¤ï¸");
},30000);

//////////////// æ‰‹æœºæ‘‡ä¸€æ‘‡ //////////////////
let lastX=null;
window.addEventListener("devicemotion",(e)=>{
let x=e.accelerationIncludingGravity.x;
if(lastX && Math.abs(x-lastX)>15){
showText("æ‘‡åˆ°å¹¸ç¦å•¦ â¤ï¸");
}
lastX=x;
});
</script>

</body>
</html>